@import com.domain.clans.ClanUtils
@(clans: Seq[com.domain.presentation.model.ClanSummary])(implicit request: RequestHeader)

@main("Clans", request.session.get("user")) {


<script>
$(function() {
    $("#clans").tablesorter( {sortList: [[4,0], [2,0]]} );
});
</script>

<table align="center" id="clans" class="clan_skirmishes" cellpadding="0" cellspacing="0">
    <!--<thead><th></th><th></th><th></th><th colspan="3">Skirmish Delta</th><th colspan="3">Skirmish Total</th></thead>-->
    <thead><th></th><th>Clan</th><th>Wn8</th><th>Members</th><th>Battles 24h</th><th>Wins 24h</th><th>%</th><th>Battles</th><th>Wins</th><th>%</th></thead>
    <tbody>
    @for(clan <- clans) {
    <tr class="hoverable">
        <td><img src="@clan.emblem"></td>
        <td class="clan_tag">
            <a class="@com.domain.presentation.model.ColorHelper.wn8Color(ClanUtils.getClanCachedWn8(clan.tag).getOrElse("0").toString)" href="@routes.ClanDetailsController.details(clan.clanId.toString)">@clan.tag</a>
        </td>
        <td>
            <span class="@com.domain.presentation.model.ColorHelper.wn8Color(ClanUtils.getClanCachedWn8(clan.tag).getOrElse("0").toString)">
            @ClanUtils.getClanCachedWn8(clan.tag).getOrElse("0").toString
            </span>
        </td>
        @if(clan.clanDelta.isDefined && clan.clanDelta.get.membersCount != 0) {

            @if(clan.clanDelta.get.membersCount > 0) {
                <td>@clan.membersCount <span class="positive">(+@clan.clanDelta.get.membersCount)</span></td>
            } else {
                <td>@clan.membersCount <span class="negative">(@clan.clanDelta.get.membersCount)</span></td>
            }

        } else {
         <td>@clan.membersCount</td>
        }
        @if(clan.clanDelta.isDefined) {
         <td>@clan.clanDelta.get.skirmishBattles</td>
         <td>@clan.clanDelta.get.skirmishBattlesWins</td>
         <td class="@com.domain.presentation.model.ColorHelper.skirmishWinRatio(clan.clanDelta.get.winRatio)">@clan.clanDelta.get.winRatio.toInt%</td>
        } else {
         <td>-</td><td>-</td><td>-</td>
        }
        <td>@clan.skirmishBattles</td>
        <td>@clan.skirmishBattlesWins</td>
        <td class="@com.domain.presentation.model.ColorHelper.skirmishWinRatio(clan.totalWinRatio)">@clan.totalWinRatio.toInt%</td>
    </tr>
    }
    </tbody>
</table>
}